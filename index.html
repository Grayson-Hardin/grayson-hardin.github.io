<script type="module" src="./main.js"></script>
<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
<body>
  <script>
    AFRAME.registerComponent('change-visibility-on-click', {
      schema: {
        visible: {default: false}
      },
  
      init: function () {
        var el = this.el;
        var data = this.data;
        var defaultVisibility = el.getAttribute('visible').visible;
  
        el.addEventListener('click', function () {
          console.log("Clicked!")
          el.setAttribute('visible', data.visible);
          });

        el.addEventListener('mouseleave', function () {
           console.log("Mouse leave")
           el.setAttribute('visible', defaultVisibility)
           el.removeAttribute('gltf-model')
           el.setAttribute('gltf-model', "#squashed_lady_bug")
        });
      }
    });
  </script> 

  <a-scene>
    <a-asset>
      <a-asset-item id="lady_bug" src="assets/models/lady_bug/scene.gltf">
      <a-asset-item id="squashed_lady_bug" src="assets/models/flat_lady_bug/scene.gltf">
    </a-asset>
    <a-entity gltf-model="#lady_bug" scale=".08 .08 .08" change-visibility-on-click position="0 1 -4"></a-entity>


    <a-entity cursor="rayOrigin:mouse"></a-entity>
    <a-camera></a-camera>
  </a-scene>
</body>