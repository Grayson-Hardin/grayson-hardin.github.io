<!DOCTYPE html>
<link rel="stylesheet" href="form.css">

<html>

<body>

  <a href="https://leantechniques.com" target="_blank">
    <img id="logo" src="./assets/pictures/colored-logo.png" alt="Lean TECHniques, Inc." />
  </a>
  <div>
    <label for="fname" font-size="20px">First Name *</label>
    <input type="text" id="fname" name="firstname" placeholder="Your name.." />

    <label for="lname">Last Name *</label>
    <input type="text" id="lname" name="lastname" placeholder="Your last name.." />

    <label for="lname">Email *</label>
    <input type="text" id="email" placeholder="Your email.." />

    <a href="https://leantechniques.com"><input id="button" type="submit" value="Submit"
        onclick="getPostRequest();" /></a>
  </div>
</body>

<script>
  function getPostRequest() {
    let userdata = {
      firstName: getInputValue("fname"),
      lastName: getInputValue("lname"),
      email: getInputValue("email"),
      multiplier: document.cookie.split(";").length,
      raffle: "",
    };
    console.log(userdata);


    if (userdata.firstName == "" || userdata.lastName == "" || userdata.email == "") {
      alert("Field(s) cannot be empty");
    } else {
      let xhr = new XMLHttpRequest();
      xhr.open("POST", "https://9809n7v990.execute-api.us-east-1.amazonaws.com/beta/userInfo");
      xhr.setRequestHeader("Content-type", "application/json");
      xhr.send(JSON.stringify(userdata));

      alert("Success");
    }
  }

  function getCookies() {
    var cookieCount = document.cookie.split(";").length;
    console.log(cookieCount);
    if (document.cookie === "") {
      cookieCount = 0;
    }
    document.getElementById("button").value = "Enter with " + cookieCount + " bugs!";
  }
  getCookies();

  function getInputValue(id) {
    var inputVal = document.getElementById(id).value;

    return inputVal;
  }
</script>

</html>