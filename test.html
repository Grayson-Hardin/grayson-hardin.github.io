<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>GeoAR.js demo</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://unpkg.com/aframe-extras@3.3.0/dist/aframe-extras.min.js"></script>
</head>

<script>
    AFRAME.registerComponent('camera-logger', {
    
      schema: {
        timestamp: {type: 'int'},
        seconds: {type: 'int'} // default 0
      },
    
      log : function () {
        var cameraEl = this.el.sceneEl.camera.el;
        var rotation = cameraEl.getAttribute('rotation');
        var worldPos = new THREE.Vector3();
        worldPos.setFromMatrixPosition(cameraEl.object3D.matrixWorld);
    //     console.log("Time: " + this.data.seconds 
    //                 + "; Camera Position: (" + worldPos.x.toFixed(2) + ", " + worldPos.y.toFixed(2) + ", " + worldPos.z.toFixed(2) 
    //                 + "); Camera Rotation: (" + rotation.x.toFixed(2) + ", " + rotation.y.toFixed(2) + ", " + rotation.z.toFixed(2) + ")");        

    
    
        console.log(worldPos)
       },

    
      play: function () {
        this.data.timestamp = Date.now();
        this.log();
      },
    
      tick: function () {  
        if (Date.now() - this.data.timestamp > 1000) {
          this.data.timestamp += 1000;
          this.data.seconds += 1;
          this.log();
        }
      },
    });
    </script>

<body>
    <a-scene style="margin: 0; overflow: hidden;">
        <a-camera id='camera' camera-logger arjs-look-controls='smoothingFactor: 0.1' gps-projected-camera='gpsMinDistance: 5'
            rotation-reader> </a-camera>

        <a-asset>
            <a-asset-item id="lady_bug" src="assets/models/lady_bug/scene.gltf">
                <a-asset-item id="squashed_lady_bug" src="assets/models/flat_lady_bug/scene.gltf">
        </a-asset>

        <a-entity cursor="rayOrigin:mouse"></a-entity>
    </a-scene>

</body>

</html>